/* ── Viewer: Modern Dashboard Split-View ───────────────────────────────── */
:root{
    --bg:#f7f7fb; --card:#fff; --text:#1f2937; --muted:#6b7280; --border:#e5e7eb;
    --primary:#4f46e5; --primary-600:#4338ca; --accent:#10b981; --danger:#ef4444;
    --shadow:0 12px 30px rgba(0,0,0,.08); --radius:16px; --radius-sm:12px; --t:.18s;
}
@media (prefers-color-scheme: dark){
    :root{
        --bg:#0b1020; --card:#12172a; --text:#e5e7eb; --muted:#94a3b8; --border:#1f2942;
        --primary:#7c83ff; --primary-600:#9aa0ff; --accent:#34d399; --danger:#f87171;
        --shadow:0 12px 30px rgba(0,0,0,.35);
    }
}
*{box-sizing:border-box}
html,body{height:100%}
body{ margin:0; background:radial-gradient(900px 600px at 80% -10%, rgba(79,70,229,.10), transparent 60%), var(--bg); color:var(--text); font:15px/1.6 ui-sans-serif, system-ui, -apple-system,"Segoe UI",Roboto,"Noto Sans KR","Apple SD Gothic Neo","Malgun Gothic",sans-serif; }

.container{ display:flex; height:100vh }

/* ── Sidebar ──────────────────────────────────────────────────────────── */
.sidebar{
    display:flex; flex-direction:column; width:320px; min-width:220px; max-width:520px; height:100vh; overflow:hidden;
    border-right:1px solid var(--border); background:var(--card); box-shadow:var(--shadow); z-index:2;
}
.sidebar-header{
    display: flex;
    flex-direction: column; /* 세로 배치 */
    align-items: stretch;
    gap: 8px;
    padding: 12px;
    border-bottom: 1px solid var(--border);
}
.sidebar-header h2 {
    font-size: 16px;
    font-weight: 700;
    margin: 0;
    color: var(--primary-600);
}
.sidebar-header h1,
.sidebar-header h3,
.sidebar-header .sidebar-title{
    /* 한국어 단어 중간 줄바꿈 방지 + 한 줄 고정 */
    word-break: keep-all;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    /* 혹시 세로쓰기 강제된 경우 대비 */
    writing-mode: horizontal-tb;
}
.search{
    flex:1; display:flex; gap:8px;
}
.search input{
    flex:1; height:38px; padding:0 12px; border-radius:10px; border:1px solid var(--border); background:transparent; color:var(--text);
    transition:border-color var(--t), box-shadow var(--t);
}
.search input:focus{ border-color:var(--primary); box-shadow:0 0 0 4px rgba(79,70,229,.12); outline:0 }
.search button{
    height:38px; padding:0 12px; border-radius:10px; border:1px solid rgba(79,70,229,.35);
    background:linear-gradient(180deg, rgba(79,70,229,.12), rgba(79,70,229,.05));
    color:var(--primary-600); cursor:pointer; transition:transform var(--t), box-shadow var(--t);
}
.search button:hover{ transform:translateY(-1px); box-shadow:var(--shadow) }

.scrollable-list{ flex:1; overflow:auto; padding:12px }
#fileList{ margin:0; padding:0; list-style:none }
#fileList li{
    display:flex; align-items:center; justify-content:flex-start;
    padding:10px 10px; border-radius:10px; cursor:pointer; transition:background var(--t);
}
#fileList li:hover{ background:rgba(79,70,229,.08) }
#fileList .name{ font-weight:600 }
#fileList .meta{ color:var(--muted); font-size:.9rem; margin-left:8px }

.bulk-delete-footer{
    position:sticky; bottom:0; background:var(--card); border-top:1px solid var(--border); padding:12px; display:flex; justify-content:flex-end;
}
#bulkDeleteBtn{
    padding:10px 14px; font-weight:700; border-radius:10px;
    background:linear-gradient(180deg, rgba(239,68,68,.14), rgba(239,68,68,.06)); border:1px solid rgba(239,68,68,.45); color:var(--danger);
    cursor:pointer; transition:transform var(--t), box-shadow var(--t);
}
#bulkDeleteBtn:hover{ transform:translateY(-1px); box-shadow:var(--shadow) }

/* ── Resizer (좌우 드래그 바) ─────────────────────────────────────────── */
.resizer{ width:6px; cursor:col-resize; background:linear-gradient(180deg, rgba(79,70,229,.28), rgba(79,70,229,.10)) }

/* ── Preview Pane ─────────────────────────────────────────────────────── */
.preview{
    flex:1; padding:22px; overflow:auto; display:flex; align-items:flex-start; justify-content:center;
}
.preview .panel{
    background:var(--card); border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
    padding:18px; position:relative; max-width:min(92vw, 1400px);
}
.preview-wrapper{ position:relative; display:inline-block }
.preview-label{
    position:absolute; top:8px; left:10px; padding:4px 8px; font-size:13px; border-radius:8px; pointer-events:none; z-index:5;
    background:rgba(0,0,0,.55); color:#fff;
}

/* 실제 이미지 */
#previewImage{
    max-width:100%; max-height:78vh; object-fit:contain; border-radius:12px; border:1px solid var(--border);
}

.panel-header {
    font-weight: 700;
    font-size: 15px;
    padding: 8px 12px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 10px;
    background: linear-gradient(180deg, rgba(79,70,229,.08), transparent);
    border-top-left-radius: var(--radius);
    border-top-right-radius: var(--radius);
}

/* ── Responsive ──────────────────────────────────────────────────────── */
@media (max-width:900px){
    .sidebar{ width:280px }
}
@media (max-width:640px){
    .container{ flex-direction:column }
    .sidebar{ width:100%; height:48vh }
    .resizer{ height:6px; width:100%; cursor:row-resize }
    .preview{ height:52vh }
}
/* === FileList 전용: 체크박스 크게 === */
    .sidebar #fileList input[type="checkbox"] {
    transform: scale(1.8);           /* 1.6~2.0 사이로 취향에 맞게 조절 */
    -webkit-transform: scale(1.8);
    transform-origin: left center;   /* 왼쪽 기준으로 커지게 */
    margin-right: 10px;              /* 파일명과 간격 */
    accent-color: var(--primary);    /* 체크 색상(지원 브라우저) */
}

/* 클릭 편의성: 행 높이/간격만 살짝 보강 (기존 #fileList li 규칙과 병행 적용됨) */
.sidebar #fileList li {
    min-height: 36px;
    gap: 8px;
}
/* ── 목록 새로고침 버튼 ──────────────────────────────────────────────────────── */
#refreshListBtn{
    padding:10px 12px; font-weight:700; border-radius:10px;
    background:linear-gradient(180deg, rgba(79,70,229,.10), rgba(79,70,229,.04));
    border:1px solid rgba(79,70,229,.35); color:var(--primary);
    cursor:pointer; transition:transform var(--t), box-shadow var(--t);
    margin-left:6px; /* '선택 삭제' 옆 간격 */
}
#refreshListBtn:hover{ transform:translateY(-1px); box-shadow:var(--shadow); }
#refreshListBtn:disabled{ opacity:.6; cursor:not-allowed; }

/* 버튼 가로 정렬 (선택 삭제 + 새로고침) */
.action-row{
    display: flex;
    gap: 8px;            /* 버튼 사이 간격 */
    margin-top: 6px;
}

/* 각 버튼이 한 줄에서 1/2씩 차지 */
.action-row #bulkDeleteBtn,
.action-row #selectAllBtn{
    flex: 1 1 0;
    width: auto;         /* 기존에 width:100% 강제된 경우를 무효화 */
    min-width: 0;
    box-sizing: border-box;
}

.refresh-row{
    margin-top:6px;
}
.refresh-row #refreshListBtn{
    width:100%;
    padding:6px 10px;          /* 얇게 */
    margin-left:0 !important;  /* 예전 규칙 무효화 */
}

/* ── 리스트 한 줄 전체가 클릭 타깃임을 시각적으로 보여주기 ─────────────────────── */
#fileList li { cursor: pointer; }
#fileList li input[type="checkbox"] { cursor: pointer; } /* 체크박스는 그대로 포인터 */

/* ── 오버레이 토글 버튼 ──────────────────────────────────────────────────────────*/
.chip{
    padding:6px 10px; border-radius:999px; font-weight:700;
    border:1px solid rgba(79,70,229,.35);
    background:linear-gradient(180deg, rgba(79,70,229,.10), rgba(79,70,229,.04));
    color:var(--primary); cursor:pointer; transition:transform .15s, box-shadow .15s;
    margin-left:8px;
}
.chip:hover{ transform:translateY(-1px); box-shadow:var(--shadow); }
.chip.off{
    background:linear-gradient(180deg, rgba(107,114,128,.10), rgba(107,114,128,.04));
    border-color:rgba(107,114,128,.35); color:#374151;
}