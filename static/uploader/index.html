<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>YOLO 업로더</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/min/dropzone.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.3/min/dropzone.min.css"/>
    <style>
        body { font-family: sans-serif; margin: 40px; }
        .dropzone {
        border: 3px dashed #007bff;
        border-radius: 10px;
        background: #f0f0f0;
        padding: 30px;
        margin-bottom: 20px;
        }
    </style>
    </head>
    <body>
    <h2>📤 YOLO 이미지 + 텍스트 업로더 (프록시 방식)</h2>

    <!-- Dropzone이 붙을 form -->
    <!-- <form action="/upload/direct/?bucket_name=yolo-train" class="dropzone" id="yoloDropzone" method="post" enctype="multipart/form-data"></form> -->
    <form action="/upload/direct" class="dropzone" id="yoloDropzone" method="post" enctype="multipart/form-data"></form>

    <script>
        Dropzone.autoDiscover = false;

        const dz = new Dropzone("#yoloDropzone", {
        paramName: "file",        // FastAPI에서 받을 필드명
        autoProcessQueue: true,   // 드롭하자마자 업로드
        uploadMultiple: false,    // false가 되면 여러 파일 전송 가능
        maxFilesize: 50,          // MB
        acceptedFiles: ".jpg,.png,.svg,.txt",
        init: function () {
            this.on("success", function (file, response) {
            console.log("✅ 업로드 성공:", file.name, response);
            });
            this.on("error", function (file, errorMessage) {
            console.error("❌ 업로드 실패:", file.name, errorMessage);
            });
        }
        });
    </script>
</body>
</html>
